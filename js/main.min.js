const overlay=document.querySelector(".overlay"),openOverlay=()=>{overlay.classList.remove("hide-block")},closeOverlay=()=>{overlay.classList.add("hide-block")},pageHeader=document.querySelector(".page-header");pageHeader.classList.remove("page-header--noJS");const mainNav=document.querySelector(".main-nav");mainNav.classList.remove("main-nav--noJS");const mainNavToggle=document.querySelector(".main-nav__toggle"),isEscapeKey=e=>"Escape"===e.key,onMainNavEscKeydown=e=>{isEscapeKey(e)&&(e.preventDefault(),closeMainNav())},openMainNav=()=>{mainNav.classList.remove("main-nav--closed"),document.addEventListener("keydown",onMainNavEscKeydown),overlay.addEventListener("click",(()=>{closeMainNav(),closeOverlay()}))},closeMainNav=()=>{mainNav.classList.add("main-nav--closed"),document.removeEventListener("keydown",onMainNavEscKeydown)};mainNavToggle.addEventListener("click",(()=>{mainNav.classList.contains("main-nav--closed")?(mainNav.classList.remove("main-nav--closed"),document.addEventListener("keydown",onMainNavEscKeydown),overlay.addEventListener("click",(()=>{closeMainNav(),closeOverlay()})),openOverlay()):closeMainNav()}));const buyTourButtons=document.querySelectorAll(".buy-tour"),modalBuyTour=document.querySelector(".modal"),modalCloseButton=document.querySelector(".modal__close-button"),onModalBuyTourEscKeydown=e=>{isEscapeKey(e)&&(e.preventDefault(),closeModalBuyTour())},openModalBuyTour=()=>{modalBuyTour.classList.remove("hide-block"),bodyFixed(),document.addEventListener("keydown",onModalBuyTourEscKeydown),modalCloseButton.addEventListener("click",closeModalBuyTour),overlay.addEventListener("click",(()=>{closeModalBuyTour(),closeOverlay(),modalCloseButton.removeEventListener("click",onModalBuyTourEscKeydown)}))},closeModalBuyTour=()=>{modalBuyTour.classList.add("hide-block"),bodyStatic(),document.removeEventListener("keydown",onModalBuyTourEscKeydown)};buyTourButtons.forEach((e=>{e.addEventListener("click",(()=>{modalBuyTour.classList.remove("hide-block"),bodyFixed(),document.addEventListener("keydown",onModalBuyTourEscKeydown),modalCloseButton.addEventListener("click",closeModalBuyTour),overlay.addEventListener("click",(()=>{closeModalBuyTour(),closeOverlay(),modalCloseButton.removeEventListener("click",onModalBuyTourEscKeydown)})),openOverlay()}))}));const countriesNames=["Греция","Албания","Македония","Черногория","Хорватия"],descriptions=["На севере Греции находится один из крупнейших комплексов монастырей, расположенных на вершинах скал. Название его «Метеора» буквально переводится как «висящие в воздухе». Этот монастырь основная цель нашего путешествия в Греции. После покарения скал из песчанника и обломочной горной породы, достигающих в высоту 600 метров, наградой будет неописуемая красота природы и атмосфера, царящая в монастырях Метеоры.","В Албании мы посетим Курорт Ксамиль. Этот курорт поразит вас чистейшей водой и удивительным пляжем. Вначале кажется, что на пляже вас встречает обычный, правда невероятно белоснежный и слишком крупный песок. Однако, присмотревшись, можно понять, что это не песок, а камни, перетёртые до такого мелкого состояния.","В Македонии нашей целью будет посетить Палаошник, который расположился в удивительно красивой лесистой местности возле Охридского озера и Самуиловой твердыни. А также мы заберемся на вершину горы Татичев Камен где находится  археологический памятник Кокино в длину около 100 метров.","Черногория удивит нас самым большим в Европе каньоном реки Тара, который в некоторых местах высотой берегов доходит до 1300 метров, а шириной не превышает трех. При этом длина каньона составляет 80 км. ","В Хорватии мы посетим необычайную пещеру названную Бередине. Ее подземный мир увлечет вас на 80-ти метровую глубину через 5 освещенных залов, украшенных удивительными нерукотворными скульптурами —  сталактитами и сталагмитами —  формировавшимися тысячи и тысячи лет."],reviews=["Метеоры в Греции можно сравнить разве что с Монсерратт в Испании. Такие же высоченные скалы. Но здесь потрясает масштаб. Огромная территория, высоко в горах. Ощущение такое, как будто стоишь на краю света!","Замечательный курорт, обязательно стоит посетить. В следующий раз возьму с собой сестру, чтобы тоже смогла вкусить все красоты природы :)","Я бы сказал необычное старое здание. В архитектуре я не разбираюсь, но подъем в гору был очень веселым так как люди оказались легкими и заводными. Красота природы впечатлила, особенно после долгого пути в гору.","Неописуемой красоты каньон! Ничего прекраснее в жизни не видела, разве что в фильмах :) Всем советую","Мы поехали всей семьей, я, моя жена и родители. Пещера просто незабываема! А то, что все это формировалось тысячелетиями, мега необычно. Первоначально даже не верилось, но натур ни с чем не спутать по итогу :)"],authorNames=["Влада Голицина","Маришка","Михаил Кузьмин","Анастасия Мей","Владимир Мулицин"],tabsHeader=document.querySelector(".tabs__description-header"),tabsDescription=document.querySelector(".tabs__description-text"),reviewsBlock=document.querySelector(".reviews"),review=document.querySelector(".reviews__description"),authorName=document.querySelector(".reviews__author-name"),authorAvatar=document.querySelector(".reviews__author-avatar"),tabsList=document.querySelector(".tabs__list"),tabsItems=document.querySelectorAll(".tabs__item"),clearClass=(e,t)=>{e.forEach((e=>{e.classList.remove(t)}))},changeCard=e=>{tabsHeader.textContent=countriesNames[e-1],tabsDescription.textContent=descriptions[e-1],review.textContent=reviews[e-1];let t="img/tabs-desktop-"+e+".webp",o="img/tabs-desktop-"+e+"@2x.webp";var s;1920===window.innerWidth&&(reviewsBlock.style.backgroundImage="url("+t+")",2===window.devicePixelRatio&&(reviewsBlock.style.backgroundImage="url("+o+")")),authorName.textContent=authorNames[e-1],authorAvatar.src="img/author-avatar-"+e+".png",authorAvatar.srcset="img/author-avatar-"+e+"@2x.png",s="tabs__item--active",tabsItems.forEach((e=>{e.classList.remove(s)})),tabsItems[e-1].classList.add("tabs__item--active")},catalogList=document.querySelector(".catalog__cards");let currentListItemID=parseInt(document.querySelector(".tabs__item--active").getAttribute("data-country-id-item"),10);const setTabsListShift=()=>{window.innerWidth<tabsList.clientWidth+25&&(tabsList.style.left=-1*(currentListItemID-1)*(tabsList.clientWidth/tabsItems.length)+"px")};catalogList.addEventListener("click",(e=>{if(e.target.closest(".card")){let t=e.target.closest(".card");currentListItemID=t.getAttribute("data-country-id"),changeCard(currentListItemID)}setTabsListShift()})),tabsList.addEventListener("click",(e=>{if(e.target.closest(".tabs__item")){let t=e.target.closest(".tabs__item");currentListItemID=t.getAttribute("data-country-id-item"),changeCard(currentListItemID)}setTabsListShift()}));let x1=null,x2=null;function swipeTabs(){if(!x1||!x2)return!1;x1-x2>0&&(currentListItemID=parseInt(currentListItemID,10)+1,currentListItemID>tabsItems.length&&(currentListItemID=tabsItems.length),changeCard(currentListItemID),setTabsListShift()),x1-x2<0&&(currentListItemID-=1,currentListItemID<1&&(currentListItemID=1),changeCard(currentListItemID),setTabsListShift())}tabsList.addEventListener("touchstart",(e=>{x1=e.touches[0].clientX})),tabsList.addEventListener("touchmove",(e=>{x2=e.touches[0].clientX})),tabsList.addEventListener("touchend",swipeTabs);const successModal=document.querySelector(".success-modal"),successModalCloseButton=document.querySelector(".success-modal__close-button"),errorModal=document.querySelector(".error-modal"),errorModalCloseButton=document.querySelector(".error-modal__close-button"),form=document.querySelectorAll("form"),body=document.querySelector("body"),bodyFixed=()=>{body.classList.add("page-body--modal-open")},bodyStatic=()=>{body.classList.remove("page-body--modal-open")},closeSuccessModal=()=>{successModal.classList.add("hide-block"),bodyStatic(),document.removeEventListener("keydown",onSuccessModalEscKeydown)},onSuccessModalEscKeydown=e=>{isEscapeKey(e)&&(e.preventDefault(),closeSuccessModal())},openSuccessModal=()=>{successModal.classList.remove("hide-block"),bodyFixed(),successModalCloseButton.addEventListener("click",(()=>{closeSuccessModal()})),overlay.addEventListener("click",(()=>{closeSuccessModal(),closeOverlay()})),document.addEventListener("keydown",onSuccessModalEscKeydown)},onErrorModalEscKeydown=e=>{isEscapeKey(e)&&(e.preventDefault(),closeErrorModal())},closeErrorModal=()=>{errorModal.classList.add("hide-block"),document.removeEventListener("keydown",onErrorModalEscKeydown)},openErrorModal=e=>{errorModal.classList.remove("hide-block"),bodyFixed(),errorModal.insertAdjacentHTML("beforeend",e.name+" / "+e.message),errorModalCloseButton.addEventListener("click",(()=>{closeErrorModal()})),overlay.addEventListener("click",(()=>{closeErrorModal(),closeOverlay()})),document.addEventListener("keydown",onErrorModalEscKeydown)};form.forEach((e=>{e.addEventListener("submit",(e=>{e.preventDefault(),openOverlay();const t=new FormData(e.target);fetch("https://webhook.site/fee3bf41-1370-48c3-818b-7bdfd12d7c5d",{method:"POST",body:t}).then((e=>{if(!e.ok)throw openErrorModal(),new Error("Ошибка соединения с сервером");closeModalBuyTour(),successModal.classList.remove("hide-block"),bodyFixed(),successModalCloseButton.addEventListener("click",(()=>{closeSuccessModal()})),overlay.addEventListener("click",(()=>{closeSuccessModal(),closeOverlay()})),document.addEventListener("keydown",onSuccessModalEscKeydown)})).catch((e=>{closeModalBuyTour(),openErrorModal(e)}))}))}));